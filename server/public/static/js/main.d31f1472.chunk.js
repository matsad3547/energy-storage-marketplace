(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{151:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},186:function(e,t,n){e.exports=n(380)},194:function(e,t,n){},195:function(e,t,n){},378:function(e,t,n){},379:function(e,t,n){},380:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(69),c=n.n(o),l=n(384),i=n(383),s=n(9),u="1.333em",d="1em",m="1.1em",p="#363D38",f="#e2e2e2",b="#A0A0A0",g="#838383",h="#fff",y="#90DDAA",v="#23B253",E="#00872D",j="#046D27",w="#01BAEF",x="#082656",O="#FFE659",S="#FFD800",k=["#F71735","#91A6FF","#FF88DC","#FAFF7F","#17BEBB","#CD5334","#004E64","#9FFFCB","#7AE582","#007EA7","#FF9F1C","#380036","#01BAEF","#26081C","#192BC2","#003459","#0E0E52","#FDE74C"],C={caiso:"#E28413",ercot:"#F56416",3:"#DD4B1A",4:"#EF271B",5:"#EA1744"},D={primary:{color:h,background:x},success:{color:h,background:v},danger:{color:h,background:"#CC333F"}},T="0px 1px 5px 0px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 3px 1px -2px rgba(0, 0, 0, 0.12)",A={fontSize:"3.157em"},I=function(e){var t=e.content;return r.a.createElement("h1",{style:A},t)},M={fontSize:"2.369em"},L=function(e){var t=e.content;return r.a.createElement("h2",{style:M},t)},P={fontSize:"1.777em"},z=function(e){var t=e.content;return r.a.createElement("h3",{style:P},t)},R={fontSize:u},F=function(e){var t=e.content;return r.a.createElement("h4",{style:R},t)},W={zIndex:1,height:"100%",backgroundImage:"linear-gradient(rgba(0, 71, 23, .2),  rgba(0, 71, 23, .9))"},B=function(e){var t=e.addlStyles;return r.a.createElement("div",{style:Object(s.a)({},W,t)})},N=n(381),Z=function(e){return{textDecoration:"none",color:e?b:p,pointerEvents:e?"none":"auto",cursor:e?"not-allowed":"pointer"}},_=function(e){var t=e.to,n=e.children,a=e.disabled,o=void 0!==a&&a;return r.a.createElement(N.a,{to:t,style:Z(o)},n)},H={root:{width:"100%",display:"inline-flex",justifyContent:"space-around",margin:"2em 0 4em"}},U=function(){return r.a.createElement("div",{style:H.root},r.a.createElement(_,{to:"/about"},r.a.createElement(F,{content:"About"})),r.a.createElement(_,{to:"/contact"},r.a.createElement(F,{content:"Contact"})))},Y={backgroundImage:"linear-gradient(".concat(j,", ").concat(v,")")},G=function(e){var t=e.addlStyles;return r.a.createElement("div",{style:Object(s.a)({},Y,t)})},J={hour:{label:"Hour",value:"hour"},day:{label:"Day",value:"day"},week:{label:"Week",value:"week"},month:{label:"Month",value:"month"}},$={Accept:"application/json","Content-Type":"application/json"},q={root:{display:"grid",gridTemplateColumns:"[leftCol1] 22% [leftCol2] 22% [centerMargin] 10% [rightCol1] 22% [rightCol2] auto [end]",gridTemplateRows:"[row1] auto [ws1] 75px [row2] auto [ws2] 50px [row3] auto [row4] auto [row5] auto [ws5] 50px"},logo:{gridColumn:"leftCol1 / centerMargin",gridRowStart:"row1"},logoText:{color:"#fff",zIndex:2,alignSelf:"end",padding:"4em",justifySelf:"start",textAlign:"left"},logoImg:{width:"100%",gridColumn:"leftCol1 / end",gridRowStart:"row1",height:"85vh",objectFit:"cover",objectPosition:"100% 70%"},sub1:{gridColumn:"rightCol1 / end",gridRowStart:"row2"},sub1Img:{width:"100%",gridColumn:"leftCol1 / end",gridRowStart:"row2",height:"70vh",objectFit:"cover",objectPosition:"100% 50%"},subText:{textAlign:"right",alignSelf:"end",padding:"2em 3em",zIndex:2,color:"#fff"},banner:{gridColumn:"leftCol1 / end",gridRowStart:"row3"},bannerText:{alignSelf:"end",padding:"2em",zIndex:2,color:"#fff"},mission:{gridColumn:"leftCol1 / end",gridRowStart:"row4",padding:"1em 3em",color:p,zIndex:2},purpose:{gridColumn:"leftCol1 / end",gridRowStart:"row5",padding:"0 6em",color:p},text:{padding:".5em",textAlign:"left"},list:{textAlign:"left",padding:"0 2em"},listItem:{padding:".2em 0"},footerLinks:{gridRowStart:"row6"}},K=function(){return r.a.createElement("div",null,r.a.createElement("div",{style:q.root},r.a.createElement("img",{style:q.logoImg,alt:"solar panels",src:"/images/solarPanels1.jpeg"}),r.a.createElement(B,{addlStyles:q.logo}),r.a.createElement("div",{style:Object(s.a)({},q.logo,q.logoText)},r.a.createElement("p",null,"sweet-ass logo"),r.a.createElement(I,{content:"Entelx"}),r.a.createElement(F,{content:"Accelerating Energy Intelligence"})),r.a.createElement("img",{style:q.sub1Img,alt:"wind turbines",src:"/images/windTurbines3.jpeg"}),r.a.createElement(B,{addlStyles:q.sub1}),r.a.createElement("div",{style:Object(s.a)({},q.sub1,q.subText)},r.a.createElement(L,{content:"Renewable energy has arrived..."}),r.a.createElement(L,{content:"But the transition to sustainable energy must move faster"})),r.a.createElement(G,{addlStyles:q.banner}),r.a.createElement("div",{style:Object(s.a)({},q.banner,q.bannerText)},r.a.createElement(L,{content:"".concat("Entelx"," is here to help")})),r.a.createElement("div",{style:q.mission},r.a.createElement(z,{content:"Our mission is to help accelerate the transition to renewable energy by improving the economics of bulk energy storage"})),r.a.createElement("div",{style:q.purpose},r.a.createElement("p",{style:q.text},"Renewable energy has expanded by leaps and bounds in the last decade and is already the lowest cost source of energy in many places in the world.  Unfortunately, most of its natural intermittency is currently handled by fossil fuel energy resources.  Plus the more renewable energy that is deployed in each location, the lower its value becomes."),r.a.createElement("p",{style:q.text},"Energy storage can solve these issues.  Storage provides a market for renewable power that would otherwise be curtailed and storage assets charged from this low-cost power can then profitably undercut the dirtiest fossil fuel generators.  Energy storage is widely seen as essential for renewable energy supplying the majority of energy demand and setting us on the path to a sustainable future."),r.a.createElement("p",{style:q.text},"Entelx"," is accelerating energy intelligence by:"),r.a.createElement("ul",{style:q.list},r.a.createElement("li",{style:q.listItem},"Providing real-time charge and discharge signals that maximize arbitrage value"),r.a.createElement("li",{style:q.listItem},"Locating and evaluating arbitrage opportunities"),r.a.createElement("li",{style:q.listItem},"Estimating storage project ROI")))),r.a.createElement(U,null))},V={backgroundImage:"linear-gradient(".concat(v,", ").concat(j,")")},X=function(e){var t=e.addlStyles;return r.a.createElement("div",{style:Object(s.a)({},V,t)})},Q={root:{display:"grid",gridTemplateColumns:"[leftCol] auto [centerMargin] 6% [rightCol] 45% [end]",gridTemplateRows:"[row1] 5em [ws1] 1em"},placement:{gridColumn:"rightCol / end",gridRowStart:"row1"},background:{clipPath:"polygon(2% 0, 100% 0, 100% 100%, 0 100%)"},text:{zIndex:1,color:h,padding:".5em 3em",justifySelf:"end",alignSelf:"end",background:"transparent"}},ee=function(e){var t=e.title;return r.a.createElement("div",{style:Q.root},r.a.createElement(X,{addlStyles:Object(s.a)({},Q.placement,Q.background)}),r.a.createElement("div",{style:Object(s.a)({},Q.placement,Q.text)},r.a.createElement(L,{content:t})))},te={root:{color:p,display:"flex",flexDirection:"column",flex:1},content:{margin:"0 0 auto"}},ne=function(e){var t=e.title,n=e.children;return r.a.createElement("div",{style:te.root},r.a.createElement(ee,{title:t}),r.a.createElement("div",{style:te.content},n),r.a.createElement(U,null))},ae=n(4),re=n(382),oe=n(38),ce=n.n(oe),le={root:{display:"block",boxSizing:"border-box",textAlign:"justify"}},ie=function(e){var t=e.zoom,n=e.center,o=e.style,c=e.children;ce.a.accessToken="pk.eyJ1IjoibWF0c2FkIiwiYSI6ImNpdWZyMGp6ZTAwaHkzM21weXJjb3hzOTMifQ.D7oqQqX-t5YlZ5CeOnCVvQ";var l=Object(a.useState)(null),i=Object(ae.a)(l,2),u=i[0],d=i[1],m=Object(a.useRef)(null);Object(a.useEffect)(function(){var e=new ce.a.Map({container:m.current,style:"mapbox://styles/mapbox/streets-v9",zoom:t,center:n,minZoom:3});return e.on("load",function(){return d(e)}),function(){return e.remove()}},[]);var p=r.a.Children.map(c,function(e){return e&&r.a.cloneElement(e,{map:u})});return r.a.createElement("div",{style:Object(s.a)({},le.root,o),ref:m},u&&p)},se=n(24),ue=n.n(se),de=n(39),me=n(0),pe=n.n(me),fe=function(e){return e.json()},be=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error("HTTP Error: ".concat(e.status," ").concat(e.statusText));throw t.status=e.statusText,t.response=e,t},ge=function(e,t){return new Promise(function(n,a){return fetch(e,t).then(be).then(n).catch(a)})},he=function(e){var t=e.map,n=Object(a.useState)(null),r=Object(ae.a)(n,2),o=r[0],c=r[1];Object(a.useEffect)(function(){(function(){var e=Object(de.a)(ue.a.mark(function e(){var t,n,a;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={method:"GET",headers:$},e.prev=1,e.next=4,ge("/nodes",t);case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,c(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error("there was an error getting nodes: ".concat(e.t0));case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(){return e.apply(this,arguments)}})()()},[]);var l=new ce.a.Popup({closeButton:!1,closeOnClick:!1}),i=Object(a.useCallback)(function(e){t.getCanvas().style.cursor="pointer";for(var n=e.features[0].geometry.coordinates.slice(),a=e.features[0].properties,r=Object.keys(a).reduce(function(e,t,n,r){var o="<tr><td><strong>".concat(function(e){switch(e){case"type":return"Type";case"name":return"Name";case"maxMw":return"Max Mw";case"controlArea":return"Control Area";default:return e}}(t),":</strong></td><td>").concat(a[t],"</td></tr>");o=n<r.length-1?o+"*":o;var c=e.split("*");return[c[0],o,c[1]].join("")},"<table>*</table>");Math.abs(e.lngLat.lng-n[0])>180;)n[0]+=e.lngLat.lng>n[0]?360:-360;l.setLngLat(n).setHTML(r).addTo(t)},[t,l]),s=Object(a.useCallback)(function(){t.getCanvas().style.cursor="",l.remove()},[t,l]),u=Object(a.useCallback)(function(){t.getCanvas().style.cursor="pointer"},[t]),d=Object(a.useCallback)(function(){t.getCanvas().style.cursor=""},[t]),m=Object(a.useCallback)(function(e){var n=t.queryRenderedFeatures(e.point,{layers:["clusters"]}),a=n[0].properties.cluster_id;t.getSource("nodes").getClusterExpansionZoom(a,function(e,a){if(!e){var r=9===a?a+1:a;t.easeTo({center:n[0].geometry.coordinates,zoom:r})}})},[t]),p=Object(a.useCallback)(function(){o&&(t.addSource("nodes",{type:"geojson",data:o,cluster:!0,clusterMaxZoom:9,clusterRadius:50}),t.addLayer({id:"clusters",type:"circle",source:"nodes",filter:["has","point_count"],paint:{"circle-color":"rgba(0, 0, 0, .2)","circle-radius":["step",["get","point_count"],20,100,30,750,40],"circle-stroke-width":1,"circle-stroke-color":"#000"}}),t.addLayer({id:"cluster-count",type:"symbol",source:"nodes",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),t.addLayer({id:"unclustered-nodes",type:"circle",source:"nodes",filter:["!",["has","point_count"]],paint:{"circle-color":["match",["get","controlArea"],"CA",k[0],"PACW",k[1],"PGE",k[2],"PSE",k[3],"NV",k[4],"IPCO",k[5],"PACE",k[6],"APS",k[7],g],"circle-radius":5,"circle-stroke-width":1,"circle-stroke-color":"#000"}}),t.on("mouseenter","clusters",u),t.on("mouseleave","clusters",d),t.on("click","clusters",m),t.on("mouseenter","unclustered-nodes",i),t.on("mouseleave","unclustered-nodes",s))},[t,o,m,u,d,i,s]),f=Object(a.useCallback)(function(){t.off("mouseenter","clusters",u),t.off("mouseleave","clusters",d),t.off("click","clusters",m),t.off("mouseenter","unclustered-nodes",i),t.off("mouseleave","unclustered-nodes",s)},[t,m,u,d,i,s]);return Object(a.useEffect)(function(){return p(),f},[o]),!1};he.propTypes={map:pe.a.object};var ye=he,ve=function(e){var t=e.map,n=e.lat,r=e.lng,o=e.color,c=void 0===o?w:o;return Object(a.useEffect)(function(){var e=t&&new ce.a.Marker({color:c}).setLngLat([r,n]).addTo(t);return function(){return e.remove()}},[r,n,c,t]),!1};ve.propTypes={map:pe.a.object,lngLat:pe.a.arrayOf(pe.a.number)};var Ee=ve,je={caiso:"https://opendata.arcgis.com/datasets/9d1099b016e5482c900d657f06f3ac80_0.geojson?where=ID%20%3D%20'2775'"},we=function(e){var t=e.map,n=e.getLatLng,r=e.iso,o=Object(a.useCallback)(function(e){t.queryRenderedFeatures(e.point)[0].layer.id===r&&n(e.lngLat)},[t,n,r]),c=Object(a.useCallback)(function(){t.addSource("isos",{type:"geojson",data:je[r]}),t.addLayer({id:r,type:"fill",source:"isos",paint:{"fill-color":C[r],"fill-opacity":.3,"fill-outline-color":"#000"}}),n&&t.on("click",r,o)},[t,n,r,o]),l=Object(a.useCallback)(function(){n&&t.off("click",r,o)},[t,r,o,n]);return Object(a.useEffect)(function(){return c(),function(){return l()}},[]),!1};we.propTypes={map:pe.a.object,iso:pe.a.oneOf(Object.keys(je)).isRequired,getLatLng:pe.a.func};var xe=we,Oe={display:"block",padding:"1em 0",fontStyle:"italic",fontSize:m},Se=function(e){var t=e.content;return r.a.createElement("span",{style:Oe},t)},ke=function(e,t){return Object(s.a)({},Ce.input,{width:e,color:t?g:p,cursor:t?"not-allowed":"inherit"})},Ce={root:{display:"block"},input:{margin:"0 .5em 1em",fontSize:m,padding:".5em",background:f,border:"none",borderRadius:10}},De=function(e){var t=e.name,n=e.label,a=e.type,o=void 0===a?"text":a,c=e.placeholder,l=void 0===c?"":c,i=e.value,s=e.inputWidth,u=void 0===s?"auto":s,d=e.unit,m=void 0===d?"":d,p=e.disabled,f=void 0!==p&&p,b=e.min,g=void 0===b?-1e3:b,h=e.max,y=void 0===h?1e3:h,v=e.step,E=void 0===v?1:v,j=e.onChange;return r.a.createElement("div",{style:Ce.root},r.a.createElement("label",{htmlFor:t,style:Oe},n),r.a.createElement("input",{style:ke(u,f),type:o,name:t,placeholder:l,value:i,disabled:f,min:"number"===o?g:void 0,max:"number"===o?y:void 0,step:"number"===o?E:void 0,onChange:function(e){return j(e,t)}}),r.a.createElement("span",null,m))},Te={root:{MozBorderRadius:10,WebkitBorderRadius:10,borderRadius:10,display:"inline-block",cursor:"pointer",fontSize:"1.3em",padding:"1em",margin:".5em 0"}},Ae=function(e){var t=e.value,n=e.type,a=e.onClick,o=e.disabled,c=void 0!==o&&o,l=e.overrideStyles,i=void 0===l?{}:l;return r.a.createElement("input",{type:"button",value:t,style:function(e){return Object(s.a)({},Te.root,D[e],i)}(n),disabled:c,onClick:a})},Ie=n(151),Me=n.n(Ie),Le=(n(194),{main:{position:"fixed",right:0,top:0,zIndex:4},logo:{position:"relative",bottom:"75vh",height:300},overlay:{background:"rgba(0, 30, 10, .8)",zIndex:3,height:"100vh",width:"100vw"},message:{color:h,position:"relative",bottom:"72vh"}}),Pe=function(e){var t=e.message;return r.a.createElement("div",{style:Le.main},r.a.createElement("div",{style:Le.overlay}),r.a.createElement("img",{src:Me.a,className:"spinner",alt:"logo",style:Le.logo}),r.a.createElement("div",{style:Le.message},t))},ze=(n(195),{label:{textAlign:"left",listStyle:"none",padding:"1em .5em"},link:{fontSize:"1.2em",textDecoration:"none",color:p}}),Re=function(e){var t=e.baseUrl,n=e.link,a=e.id,o=e.label;return r.a.createElement(N.a,{to:"".concat(t,"/").concat(n,"/").concat(a),style:ze.link},r.a.createElement("li",{className:"navButton",style:ze.label},o))},Fe={position:"absolute",zIndex:2,background:h,width:"13em",padding:".5em 1em",borderRight:"1px solid ".concat(g),boxShadow:T},We=function(e){var t=e.baseUrl,n=e.id;return r.a.createElement("ul",{style:Fe},[{link:"project",label:"Project Home"},{link:"dashboard",label:"Project Dashboard"},{link:"historical",label:"Historical"},{link:"insights",label:"Insights"}].map(function(e,a){return r.a.createElement(Re,{key:"nav-button".concat(a),baseUrl:t,link:e.link,id:n,label:e.label})}))},Be={root:{alignSelf:"center"},button:{boxSizing:"border-box",padding:".5em",height:"97%",fontSize:"1.5em",cursor:"pointer"}},Ne=function(e){var t=e.baseUrl,n=e.id,o=Object(a.useState)(!1),c=Object(ae.a)(o,2),l=c[0],i=c[1],s=Object(a.useRef)(null),u=function(e){s.current&&!s.current.contains(e.target)&&i(!1)};Object(a.useEffect)(function(){return document.addEventListener("mousedown",u),function(){return document.removeEventListener("mousedown",u)}});return r.a.createElement("div",null,r.a.createElement("div",{style:Be.button},r.a.createElement("span",{className:"fas fa-bars",onClick:function(){return i(!l)}})),l&&r.a.createElement("div",{ref:s},r.a.createElement(We,{baseUrl:t,id:n})))},Ze={root:{display:"grid",gridTemplateColumns:"[leftCol] auto [centerMargin] 6% [rightCol] 45% [end]",gridTemplateRows:"[row1] minmax(4em, max-content) [ws1] 3em"},compactRoot:{display:"block",width:"100%",position:"fixed",zIndex:2,top:0,background:"white",boxShadow:T,transition:"all 1s"},placement:{gridColumn:"leftCol / centerMargin",gridRowStart:"row1"},background:{clipPath:"polygon(0 0, 100% 0, 98% 100%, 0 100%)"},items:{display:"inline-flex",justifyContent:"space-between",color:h,zIndex:1},compactItems:{display:"inline-flex",justifyContent:"space-between",width:"100%",color:g,alignItems:"baseline"},text:{padding:".5em 2em",alignSelf:"flex-end",background:"transparent"},compactText:{padding:".5em 2em"}},_e=function(e){var t=e.title,n=e.baseUrl,o=e.id,c=e.showMenu,l=Object(a.useState)(null),i=Object(ae.a)(l,2),u=i[0],d=i[1],m=u<0,p=Object(a.useRef)(null),f=Object(a.useCallback)(function(e){if(p.current){var t=p.current.getBoundingClientRect().top;d(t)}},[]);Object(a.useEffect)(function(){return f(),document.addEventListener("scroll",f),function(){return document.removeEventListener("scroll",f)}},[f]);var b=m?{height:120}:{height:2},g=m?Ze.compactRoot:Ze.root,h=m?{display:"none"}:Object(s.a)({},Ze.background,Ze.placement),y=m?Ze.compactItems:Object(s.a)({},Ze.placement,Ze.items),v=m?Object(s.a)({fontSize:u>=-40&&u<0?"".concat(1+.005*u,"em"):u<-40?".8em":"1em"},Ze.compactText):Ze.text;return r.a.createElement("div",null,r.a.createElement("div",{ref:p,style:b}),r.a.createElement("div",{style:g},r.a.createElement(X,{addlStyles:h}),r.a.createElement("div",{style:y},c&&r.a.createElement(Ne,{baseUrl:n,id:o}),r.a.createElement("div",{style:v},r.a.createElement(z,{content:t})))))},He=function(e){var t=e.title,n=e.baseUrl,a=e.id,o=e.children,c=e.showMenu,l=void 0===c||c;return r.a.createElement("div",null,r.a.createElement(_e,{title:t,baseUrl:n,id:a,showMenu:l}),o)},Ue=n(55),Ye=(n(70),n(19)),Ge=n.n(Ye);var Je=function(e,t,n){return Ge.a.tz(e,t).format(n)},$e=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},qe=function(e,t){e.preventDefault(),t(e.target.value)},Ke=function(e,t,n){return n?e.replace("/".concat(t,"/").concat(n),""):e.replace("/".concat(t),"")},Ve=function(e){return"$".concat($e(e,2).toFixed(2))},Xe={root:{display:"flex",boxSizing:"border-box",flexWrap:"wrap",justifyContent:"space-between",color:p,padding:"0 3em 2em",width:"100%"},form:{display:"block",boxSizing:"border-box",minWidth:"30rem",textAlign:"left",flex:"1 1 48%",padding:"0 1em"},subSection:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",padding:"1em 0"},header:{width:"100%"},label:{fontSize:m,padding:"1em 0"},latLng:{display:"inline-flex",justifyContent:"space-between"},mapContainer:{display:"flex",flexDirection:"column",boxSizing:"border-box",flex:"1 1 48%",padding:"1em",minHeight:"50em"},map:{height:"100%"},button:{display:"flex",width:"100%",padding:"0 1em"}},Qe=Object(re.a)(function(e){var t=e.match,n=e.history,o=t.url,c=Ke(o,"create_project"),l=Object(a.useState)(38.00002),i=Object(ae.a)(l,2),s=i[0],u=i[1],d=Object(a.useState)(-119.00003),m=Object(ae.a)(d,2),p=m[0],f=m[1],b=Object(a.useState)(""),g=Object(ae.a)(b,2),h=g[0],y=g[1],v=Object(a.useState)(2),E=Object(ae.a)(v,2),j=E[0],w=E[1],x=Object(a.useState)(1),O=Object(ae.a)(x,2),S=O[0],k=O[1],C=Object(a.useState)(.85),D=Object(ae.a)(C,2),T=D[0],A=D[1],I=Object(a.useState)(""),M=Object(ae.a)(I,2),L=M[0],P=M[1],z=Object(a.useState)(""),R=Object(ae.a)(z,2),W=R[0],B=R[1],N=Object(a.useState)("CA"),Z=Object(ae.a)(N,2),_=Z[0],H=Z[1],U=Object(a.useState)(""),Y=Object(ae.a)(U,2),G=Y[0],J=Y[1],$=Object(a.useState)(!1),q=Object(ae.a)($,2),K=q[0],V=q[1],X=Object(a.useState)(!1),Q=Object(ae.a)(X,2),ee=Q[0],te=Q[1];return r.a.createElement(He,{title:"Create Your Project",baseUrl:c,id:"create_project",showMenu:!1},r.a.createElement("div",{style:Xe.root},K&&r.a.createElement(Pe,{message:"Building your project..."}),r.a.createElement("div",{style:Xe.form},r.a.createElement("div",{style:Xe.subSection},r.a.createElement("div",{style:Xe.header},r.a.createElement(F,{content:"General"})),r.a.createElement(De,{name:"projectName",label:"Project Name",placeholder:'"My Project"',value:h,inputWidth:"23em",onChange:function(e){return qe(e,y)}}),r.a.createElement(De,{name:"energyCapacity",label:"Project Energy Capacity",type:"number",value:j,inputWidth:"4em",unit:"MWh",min:0,step:.1,onChange:function(e){return qe(e,w)}}),r.a.createElement(De,{name:"powerCapacity",label:"Project Power Capacity",type:"number",value:S,inputWidth:"4em",unit:"MW",min:0,step:.1,onChange:function(e){return qe(e,k)}}),r.a.createElement(De,{name:"rte",label:"Round Trip Efficiency",type:"number",value:$e(100*T,1),inputWidth:"2.5em",unit:"%",min:0,max:99,step:1,onChange:function(e){e.preventDefault(),A(e.target.value/100)}})),r.a.createElement("div",{style:Xe.subSection},r.a.createElement("div",{style:Xe.header},r.a.createElement(F,{content:"Location"}),r.a.createElement("p",{style:Xe.label},"Enter an address or pick a location on the map")),r.a.createElement(De,{name:"address",label:"Address",placeholder:'"123 Main St. Ste 456"',value:L,inputWidth:"23em",onChange:function(e){return qe(e,P)}}),r.a.createElement(De,{name:"city",label:"City",placeholder:'"Los Angeles"',value:W,inputWidth:"18em",onChange:function(e){return qe(e,B)}}),r.a.createElement(De,{name:"state",label:"State",value:_,inputWidth:"5em",onChange:H,disabled:!0}),r.a.createElement(De,{name:"zip",label:"Zip Code",placeholder:'"90001"',value:G,inputWidth:"10em",onChange:function(e){return qe(e,J)}}),r.a.createElement("div",{style:Xe.latLng},r.a.createElement(De,{name:"lat",label:"Latitude",type:"number",value:s,inputWidth:"6em",disabled:!0}),r.a.createElement(De,{name:"lng",label:"Longitude",type:"number",value:p,inputWidth:"6em",disabled:!0})))),r.a.createElement("div",{style:Xe.mapContainer},r.a.createElement(ie,{center:[p,s],zoom:5,style:Xe.map},r.a.createElement(xe,{iso:"caiso",getLatLng:function(e){var t=e.lat,n=e.lng;u($e(t,5)),f($e(n,5)),te(!0)}}),r.a.createElement(ye,null),ee&&r.a.createElement(Ee,{lat:s,lng:p}))),r.a.createElement("div",{style:Xe.button},r.a.createElement(Ae,{value:"SUBMIT",type:"success",onClick:function(){V(!0);var e=JSON.stringify({name:h,address:L,city:W,state:_,power:S,energy:j,lat:s,lng:p,rte:T,type:t.url.includes("demo")?"demo":"test"});ge("/project/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:e}).then(fe).then(function(e){V(!1),n.push("".concat(c,"/project/").concat(e.id))}).catch(function(e){V(!1),function(e){console.error("There was an error creating your project: ".concat(e))}(e)})}}))))}),et={fontSize:"1.2em",padding:"0 .5em 1em"},tt=function(e){var t=e.content;return r.a.createElement("p",{style:et},t)},nt={root:{display:"flex"},project:{display:"flex",flexDirection:"column",textAlign:"left",padding:"0 1em",flex:"1 1 48%"},header:{padding:"0 1em 2em"},specs:{padding:"0 2em"},latLng:{display:"inline-flex",alignItems:"baseline",justifyContent:"space-between",width:"22em"},button:{padding:"0 1em"},map:{height:"100%"},mapContainer:{display:"flex",flexDirection:"column",boxSizing:"border-box",padding:"0 2em",height:"30em",flex:"1 1 48%"}},at=Object(re.a)(function(e){var t=e.match,n=e.history,o=t.url,c=t.params.projectId,l=Object(a.useState)(!1),i=Object(ae.a)(l,2),s=i[0],u=i[1],d=Object(a.useState)(null),m=Object(ae.a)(d,2),p=m[0],f=m[1],b=Ke(o,"project",c),g=Object(a.useCallback)(function(){u(!0);var e={method:"GET",headers:$};ge("/project/".concat(c),e).then(fe).then(function(e){f(e[0]),u(!1)}).catch(function(e){u(!1),console.error("There was an error retrieving your project: ".concat(e))})},[c]);return Object(a.useEffect)(function(){return g()},[g]),r.a.createElement(He,{title:p?"".concat(p.name," - Home"):"Project Home",baseUrl:b,id:c},r.a.createElement("div",{style:nt.root},s&&r.a.createElement(Pe,{message:""}),r.a.createElement("div",{style:nt.project},r.a.createElement("div",{style:nt.header},r.a.createElement(F,{content:"Project Specifications"})),p&&r.a.createElement("div",{style:nt.specs},r.a.createElement(Se,{content:"Power"}),r.a.createElement(tt,{content:"".concat(p.power," Mw")}),r.a.createElement(Se,{content:"Energy"}),r.a.createElement(tt,{content:"".concat(p.energy," Mwh")}),r.a.createElement(Se,{content:"Round Trip Efficiency"}),r.a.createElement(tt,{content:"".concat(100*p.rte,"%")}),r.a.createElement(Se,{content:"Location"}),p.address?r.a.createElement(tt,{content:"".concat(p.address," - ").concat(p.city," -  ").concat(p.state)}):r.a.createElement("div",{style:nt.latLng},r.a.createElement(tt,{content:p.lat}),r.a.createElement(Se,{content:"latitude"}),r.a.createElement(tt,{content:p.lng}),r.a.createElement(Se,{content:"longitude"}))),r.a.createElement("div",{style:nt.button},r.a.createElement(Ae,{value:"DELETE PROJECT",type:"danger",onClick:function(){u(!0);var e={method:"DELETE",headers:$};ge("/project/".concat(c),e).then(function(e){u(!1),n.push("".concat(b))}).catch(function(e){u(!1),console.error("There was an error deleting your project: ".concat(e))})}}))),r.a.createElement("div",{style:nt.mapContainer},p&&r.a.createElement(ie,{center:[p.lng,p.lat],zoom:8,style:nt.map},r.a.createElement(Ee,{lat:p.lat,lng:p.lng})))))}),rt=function(e,t){return Object(a.useEffect)(function(){var n=new EventSource(e),a=function(e){return console.log("ping: ".concat(JSON.parse(e.data).time))},r=function(t){return console.error("There was an error getting data from event source ".concat(e,":"),t)};return n.addEventListener("message",t),n.addEventListener("ping",a),n.addEventListener("error",r),function(){n.removeEventListener("message",t),n.removeEventListener("ping",a),n.removeEventListener("error",r),console.log("closing sse connection..."),n.close()}},[e,t])},ot=function(e){var t=e.match,n=t.url,o=t.params.projectId,c=Ke(n,"roi",o),l=Object(a.useState)(!1),i=Object(ae.a)(l,1)[0],s=Object(a.useState)(null),u=Object(ae.a)(s,2),d=u[0],m=u[1],p=Object(a.useCallback)(function(e){console.log(e),m(JSON.parse(e.data))},[]),f="/roi/".concat(o);return rt(f,p),r.a.createElement(He,{title:"Project Return on Investment",baseUrl:c,id:o},i&&r.a.createElement(Pe,{message:""}),r.a.createElement("p",null,"Project id: ",o),d&&r.a.createElement("p",null,d.cheese))},ct={root:{textAlign:"left",padding:"0 3em 2em"},header:{padding:"0 0 .5em"}},lt=function(e){var t=e.headerContent,n=e.children,a=e.childStyles,o=void 0===a?{}:a;return r.a.createElement("div",{style:ct.root},r.a.createElement("div",{style:ct.header},r.a.createElement(F,{content:t})),r.a.createElement("div",{style:o},n))},it={display:"flex",flexWrap:"wrap",justifyContent:"space-between",padding:".5em 1em"},st=function(e){var t=e.children;return r.a.createElement("div",{style:it},t)},ut=n(199)(window),dt=function(e){var t=e.icon,n=e.style,o=function(e){switch(e){case"clear-night":return{key:"CLEAR_NIGHT",color:x};case"rain":return{key:"RAIN",color:w};case"snow":return{key:"SNOW",color:w};case"sleet":return{key:"SLEET",color:w};case"wind":return{key:"WIND",color:b};case"fog":return{key:"FOG",color:b};case"cloudy":return{key:"CLOUDY",color:b};case"partly-cloudy-day":return{key:"PARTLY_CLOUDY_DAY",color:O};case"partly-cloudy-night":return{key:"PARTLY_CLOUDY_NIGHT",color:x};default:return{key:"CLEAR_DAY",color:S}}}(t),c=new ut({color:o.color}),l=Object(a.useRef)(null);return Object(a.useEffect)(function(){c.add(l.current,ut[o.key]),c.play();var e=l.current;return function(){return c.remove(e)}},[t,c,o.key]),r.a.createElement("canvas",{width:"128",height:"128",style:n,ref:l})},mt={padding:"0 0 1em",fontSize:".8em",fontStyle:"italic"},pt=function(e){var t=e.message,n=e.millis,a=e.timeZone;return r.a.createElement("p",{style:mt},"".concat(t," ").concat(Ge()(n).tz(a).format("M/D h:mm A")))},ft={linkContainer:{width:"100%",textAlign:"right"},icon:{height:"5em",padding:"0 0 1em"},ds:{color:"#0BA8F7",textDecoration:"none",fontSize:".8em",textAlign:"right"}},bt=function(e){var t=e.weather,n=e.timeZone;return r.a.createElement(lt,{headerContent:"Weather"},t?r.a.createElement(st,null,r.a.createElement("div",null,r.a.createElement(pt,{message:"Data as of",millis:1e3*t.time,timeZone:n}),r.a.createElement(dt,{icon:t.icon,style:ft.icon})),r.a.createElement("div",null,r.a.createElement(Se,{content:"Current Temperature"}),r.a.createElement(tt,{content:"".concat($e(t.temperature,1),"\xb0F")})),r.a.createElement("div",null,r.a.createElement(Se,{content:"Cloud Cover"}),r.a.createElement(tt,{content:"".concat($e(100*t.cloudCover,0)," %")})),r.a.createElement("div",null,r.a.createElement(Se,{content:"Wind"}),r.a.createElement(tt,{content:"".concat($e(t.windSpeed,1)," mph gusting to ").concat($e(t.windGust,1)," mph, bearing ").concat(t.windBearing,"\xb0")})),t.nearestStormDistance>0&&r.a.createElement("div",null,r.a.createElement(Se,{content:"Nearest Storm"}),r.a.createElement(tt,{content:"".concat(t.nearestStormDistance," mi bearing ").concat(t.nearestStormBearing,"\xb0")})),r.a.createElement("div",{style:ft.linkContainer},r.a.createElement("a",{style:ft.ds,target:"_blank",rel:"noopener noreferrer",href:"https://darksky.net/poweredby/"},"Powered by Dark Sky"))):r.a.createElement("p",null,"Weather data is not currently available"))},gt=function(e){return{color:e,fontSize:"2em",fontStyle:"italic",fontWeight:"bold",padding:"0 0 .5em",boxSizing:"border-box",width:"min-content"}},ht={charge:w,discharge:v,standby:g},yt=function(e){var t=e.currentPrc,n=e.avgPrc,a=e.status;if(t&&n&&a){var o=t-n,c="charge"===a,l="discharge"===a,i=!c&&!l;return r.a.createElement("div",null,c&&r.a.createElement("div",{style:gt(ht.charge)},"CHARGE"),l&&r.a.createElement("div",{style:gt(ht.discharge)},"DISCHARGE"),i&&r.a.createElement("div",{style:gt(ht.standby)},"STANDBY"),r.a.createElement("p",null,function(e,t,n){var a=$e(Math.abs(e),2);switch(!0){case t:return"LMP is currently $".concat(a,"/MWh less than 3-week running average");case n:return"LMP is currently $".concat(a,"/MWh greater than 3-week running average");default:return"Prices are not currently favorable for charging or discharging"}}(o,c,l)))}return r.a.createElement("p",null,"Status data is not currently available")},vt={display:"block",padding:"0 0 1em",fontStyle:"italic",fontSize:u},Et=function(e){var t=e.content;return r.a.createElement("span",{style:vt},t)},jt={root:{display:"flex",padding:"0 1em"},status:{width:"35em"},prices:{display:"flex",justifyContent:"space-between",padding:"1.5em 0 0"},followingSection:{padding:"0 0 0 2em"}},wt=function(e){var t=e.config,n=e.prices,a=e.charge,o=e.revenue,c=e.status,l=n&&n[n.length-1],i=l&&l.lmp,s=l&&l.mvgAvg,u=l&&l.timestamp;return r.a.createElement(lt,{headerContent:"Status"},r.a.createElement("div",{style:jt.root},r.a.createElement("div",{style:jt.status},u&&r.a.createElement(pt,{message:"Data as of",millis:u,timeZone:t.timeZone}),r.a.createElement(yt,{currentPrc:i,avgPrc:s,status:c}),t&&i&&r.a.createElement("div",{style:jt.prices},r.a.createElement("div",null,r.a.createElement(Se,{content:"Current Price"}),r.a.createElement(tt,{content:Ve(i)})),r.a.createElement("div",null,r.a.createElement(Se,{content:"Charge Threshold"}),r.a.createElement(tt,{content:Ve(t.chargeThreshold)})),r.a.createElement("div",null,r.a.createElement(Se,{content:"Discharge Threshold"}),r.a.createElement(tt,{content:Ve(t.dischargeThreshold)})))),r.a.createElement("div",{style:jt.followingSection},r.a.createElement(Et,{content:"State of Charge"}),null!==a&&t.energy?r.a.createElement(tt,{content:"".concat($e(a/t.energy*100,1)," %")}):r.a.createElement("span",null,"State of charge data is not currently available")),r.a.createElement("div",{style:jt.followingSection},r.a.createElement(Et,{content:"Revenue"}),null!==o?r.a.createElement(tt,{content:Ve(o)}):r.a.createElement("span",null,"Revenue data is not currently available"))))},xt=n(164),Ot=n(17),St=["#03CEA4","#78C3FB","#89A6FB","#7067CF","#345995","#A11692","#861388"],kt={lmp:{unit:"$/Mwh",label:"Locational Marginal Price",color:St[0],format:function(e){return $e(e,2)}},temperature:{unit:"\xb0F",label:"Temperature",color:St[1],format:function(e){return $e(e,0)}},windSpeed:{unit:" m/s",label:"Wind Speed",color:St[2],format:function(e){return $e(e,0)}},windBearing:{unit:"\xb0",label:"Wind Bearing",color:St[3],format:function(e){return e||"n/a"}},cloudCover:{unit:"%",label:"Cloud Cover",color:St[4],format:function(e){return 100*$e(e,2)}},mvgAvg:{unit:"$/Mwh",label:"Average Price",color:St[6],format:function(e){return Math.round(100*e)/100}}},Ct={score:{unit:"",label:"Score",color:function(e){return e>0?"red":"green"},format:function(e){return Math.round(1e3*e)/1e3}}},Dt=Object(s.a)({},kt,Ct),Tt={root:{backgroundColor:"#fff",border:"1px solid #a8a2aa",borderRadius:5,textAlign:"left"},date:{padding:5,fontSize:"1em"}},At=function(e){var t=e.payload,n=e.label,a=e.active,o=e.timeZone;return a&&r.a.createElement("div",{style:Tt.root},r.a.createElement("p",{style:Tt.date},Je(n,o,"M/D h:mm A")),t.map(function(e,t){return r.a.createElement("p",{style:{color:e.color,padding:5},key:"value-".concat(t)},"".concat(Dt[e.name].label,":  ").concat(Dt[e.name].format(e.value)).concat(Dt[e.name].unit))}))},It=(n(378),Object(s.a)({},kt,Ct)),Mt=function(e){return Object(s.a)({},Lt.legendTile,{background:e})},Lt={root:{display:"inline-flex",flexWrap:"wrap",justifyContent:"space-evenly",padding:"0 5em 0 0"},dataType:{padding:".3em",display:"inline-flex",alignItems:"baseline"},legendTile:{margin:"0 12px 0 6px",width:20,height:10}},Pt=function(e){var t=e.payload;return r.a.createElement("div",{style:Lt.root},t.map(function(e,t){return r.a.createElement("div",{style:Lt.dataType,key:"legend-".concat(t)},It[e.value].label,": ",r.a.createElement("div",{style:Mt(e.color)}))}))},zt=r.a.memo(function(e){var t=e.data,n=e.timeZone,a=e.barKey,o=e.negBarThreshold,c=void 0===o?0:o,l=e.posBarThreshold,i=void 0===l?0:l,u=e.aspect,d=void 0===u?3:u,m=e.xRefLines,p=void 0===m?[]:m,f=e.useBrush,b=void 0!==f&&f,h=function(e){return e.reduce(function(e,t){return Object.keys(t).forEach(function(t){return e=e.includes(t)||"timestamp"===t?e:[].concat(Object(Ue.a)(e),[t])}),e},[])}(t).filter(function(e){return Object.keys(kt).includes(e)}),E=t.reduce(function(e,t){var n=t.score>0?t[a]>i:t[a]<c,r=(t.score,Object(xt.a)(t,["score"]));return[].concat(Object(Ue.a)(e),n?[t]:[Object(s.a)({},r)])},[]);return r.a.createElement(Ot.i,{width:"100%",aspect:d},r.a.createElement(Ot.e,{data:E,margin:{top:0,right:0,left:0,bottom:0}},r.a.createElement(Ot.k,{dataKey:"timestamp",tickFormatter:function(e){return Je(e,n,"h:mm A")}}),r.a.createElement(Ot.l,{yAxisId:"left",tickCount:10,minTickGap:5}),r.a.createElement(Ot.l,{yAxisId:"right",orientation:"right",tickCount:5,domain:[-3,3]}),r.a.createElement(Ot.c,{strokeDasharray:"3 3"}),r.a.createElement(Ot.j,{content:r.a.createElement(At,{timeZone:n})}),r.a.createElement(Ot.h,{y:0,yAxisId:"right",stroke:g,strokeDasharray:"4 4"}),r.a.createElement(Ot.a,{yAxisId:"right",dataKey:"score",fill:"#000"},t.map(function(e,t){return r.a.createElement(Ot.d,{fill:e.score>0?v:w,key:"bar-".concat(t)})})),b&&r.a.createElement(Ot.b,{dataKey:"timestamp",height:30,stroke:y,tickFormatter:function(e){return Je(e,n,"M/D h:mm A")},endIndex:0}),h.map(function(e){return r.a.createElement(Ot.g,{yAxisId:"left",key:"".concat(e,"-line"),type:"monotone",dataKey:e,connectNulls:!0,stroke:kt[e].color,dot:!1})}),p.map(function(e,t){return r.a.createElement(Ot.h,{x:e,yAxisId:"right",key:"x-".concat(t)})}),r.a.createElement(Ot.f,{content:r.a.createElement(Pt,null)})))}),Rt={root:{textAlign:"left"},chart:{padding:"1em 0"},noData:{padding:"0 1em"}},Ft=function(e){var t=e.match,n=t.url,o=t.params.projectId,c=Ke(n,"dashboard",o),l=Object(a.useState)(!1),i=Object(ae.a)(l,2),s=i[0],u=i[1],d=Object(a.useState)(null),m=Object(ae.a)(d,2),p=m[0],f=m[1],b=Object(a.useState)(null),g=Object(ae.a)(b,2),h=g[0],y=g[1],v=Object(a.useState)(null),E=Object(ae.a)(v,2),j=E[0],w=E[1],x=Object(a.useState)(null),O=Object(ae.a)(x,2),S=O[0],k=O[1],C=Object(a.useState)("standby"),D=Object(ae.a)(C,2),T=D[0],A=D[1],I=Object(a.useState)(null),M=Object(ae.a)(I,2),L=M[0],P=M[1],z=Object(a.useCallback)(Object(de.a)(ue.a.mark(function e(){var t,n,a;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),t={method:"GET",headers:$},e.prev=2,e.next=5,ge("/dashboard/".concat(o,"/config"),t);case 5:return n=e.sent,e.next=8,fe(n);case 8:a=e.sent,P(a.config),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("There was an error retrieving your project: ".concat(e.t0));case 15:return e.prev=15,u(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])})),[o]),R=Object(a.useCallback)(function(e){e.preventDefault();var t=JSON.parse(e.data),n=t.weather,a=t.prices,r=t.revenue,o=t.charge,c=t.status;f(n),y(a),w(r),k(o),A(c)},[]),F="/dashboard/".concat(o,"/data");rt(F,R),Object(a.useEffect)(function(){z()},[]);var W=h&&h.length>0,B=s&&!W;return r.a.createElement(He,{title:L?"".concat(L.projectName," - Dashboard"):"Project Dashboard",baseUrl:c,id:o},B&&r.a.createElement(Pe,{message:""}),r.a.createElement("div",{style:Rt.root},r.a.createElement(wt,{config:L,prices:h,charge:S,revenue:j,status:T}),r.a.createElement(lt,{headerContent:"Last Hour"},W&&L?r.a.createElement(zt,{barKey:"lmp",negBarThreshold:L.chargeThreshold,posBarThreshold:L.dischargeThreshold,data:h,timeZone:L.timeZone,aspect:4}):r.a.createElement("p",{style:Rt.noData},"Data for the last hour is not currently available")),L&&r.a.createElement(bt,{weather:p,timeZone:L.timeZone})))},Wt=function(e){return Object(s.a)({},Bt.root,{width:e})},Bt={root:{display:"flex",flexDirection:"column",justifyContent:"space-between",padding:".5em 0"},value:{padding:".5em 1em",fontSize:"1.2em"},buttons:{display:"flex",justifyContent:"space-between",padding:"0 .5em"},button:{padding:".5em",margin:0,width:"5em"}},Nt=function(e){var t=e.value,n=e.format,a=e.title,o=e.onIncrement,c=e.onDecrement,l=e.onIncrementLabel,i=e.onDecrementLabel,s=e.disabled,u=void 0!==s&&s,d=e.width,m=void 0===d?"16em":d;return r.a.createElement("div",{style:Wt(m)},r.a.createElement(Se,{content:a}),r.a.createElement(tt,{content:n(t)}),r.a.createElement("div",{style:Bt.buttons},r.a.createElement(Ae,{value:"- ".concat(i),disabled:u,type:"primary",onClick:c,overrideStyles:Bt.button}),r.a.createElement(Ae,{value:"+ ".concat(l),disabled:u,type:"primary",onClick:o,overrideStyles:Bt.button})))},Zt=function(e){var t=e.date,n=e.title,a=e.increment,o=e.onIncrement,c=e.onDecrement,l=e.timeZone,i=e.disabled,s=void 0!==i&&i;return r.a.createElement(Nt,{value:t,format:function(e){return Ge.a.tz(e,l).format("ddd, MMM Do YYYY, h:mm A")},title:n,onIncrement:o,onDecrement:c,onIncrementLabel:"".concat(J[a].label),onDecrementLabel:"".concat(J[a].label),disabled:s,width:"18em"})},_t=function(e){return Object(s.a)({},Ht.input,{color:e?g:p,cursor:e?"not-allowed":"inherit"})},Ht={root:{display:"inline-flex",alignItems:"baseline"},input:{margin:"0 .5em 1em",fontSize:m,padding:".5em",background:f,border:"none",borderRadius:10},label:{padding:".2em 0",fontSize:"1em"}},Ut=function(e){var t=e.name,n=e.label,a=e.value,o=e.checked,c=e.onChange,l=e.disabled,i=void 0!==l&&l;return r.a.createElement("div",{style:Ht.root},r.a.createElement("input",{style:_t(i),type:"radio",id:t,value:a,checked:o,disabled:i,onChange:c}),r.a.createElement("label",{htmlFor:t,style:Object(s.a)({},Oe,Ht.label)},n))},Yt={fontSize:d},Gt=function(e){var t=e.content;return r.a.createElement("h5",{style:Yt},t)},Jt={display:"flex",flexDirection:"column",padding:".5em 0"},$t=function(e){var t=e.onSelect,n=e.selected,a=(e.disabled,Object.keys(J).map(function(e){return Object(s.a)({},J[e],{disabled:!1})}));return r.a.createElement("div",null,r.a.createElement(Gt,{content:"Select Time Increment"}),r.a.createElement("div",{style:Jt},a.map(function(e,a){return r.a.createElement(Ut,{name:e.value,label:e.label,value:e.value,checked:n===e.value,onChange:t,disabled:e.disabled,key:"lr=".concat(a)})})))},qt=function(e){return Object(s.a)({},Kt.input,{color:e?g:p,cursor:e?"not-allowed":"inherit"})},Kt={root:{display:"inline-flex",alignItems:"baseline"},input:{margin:"0 .5em 1em",fontSize:m,padding:".5em",background:f,border:"none",borderRadius:10},label:{padding:".2em 0",fontSize:"1em"}},Vt=function(e){var t=e.name,n=e.label,a=e.value,o=e.checked,c=e.onChange,l=e.disabled,i=void 0!==l&&l;return r.a.createElement("div",{style:Kt.root},r.a.createElement("input",{style:qt(i),type:"checkbox",id:t,value:a,checked:o,disabled:i,onChange:c}),r.a.createElement("label",{htmlFor:t,style:Object(s.a)({},Oe,Kt.label)},n))},Xt={padding:"0 0 1em",fontSize:".8em",fontStyle:"italic"},Qt=function(e){var t=e.message,n=e.startMillis,a=e.endMillis,o=e.timeZone;return r.a.createElement("p",{style:Xt},"".concat(t," ").concat(Ge()(n).tz(o).format("M/D h:mm A")," to ").concat(Ge()(a).tz(o).format("M/D h:mm A")))},en={dateControls:{display:"flex",justifyContent:"space-between"},inclusion:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},getData:{margin:".5em 0 0 1.5em"},minDate:{padding:"0 0 1em"}},tn=function(e){var t=e.match,n=t.url,o=t.params.projectId,c=Ke(n,"historical",o),l=function(){return Ge()()},i=l(),s=i.clone().subtract(7,"days"),u=Object.keys(J),d=Object(a.useState)(s),m=Object(ae.a)(d,2),p=m[0],f=m[1],b=Object(a.useState)(i),g=Object(ae.a)(b,2),h=g[0],y=g[1],v=Object(a.useState)(u[1]),E=Object(ae.a)(v,2),j=E[0],w=E[1],x=Object(a.useState)(!1),O=Object(ae.a)(x,2),S=O[0],k=O[1],C=Object(a.useState)(null),D=Object(ae.a)(C,2),T=D[0],A=D[1],I=Object(a.useState)(null),M=Object(ae.a)(I,2),L=M[0],P=M[1],z=Object(a.useState)(!1),R=Object(ae.a)(z,2),F=R[0],W=R[1],B=Object(a.useState)(null),N=Object(ae.a)(B,2),Z=N[0],_=N[1],H=function(e){return e.clone().add(1,j)},U=function(e){return e.clone().subtract(1,j)},Y=Object(a.useCallback)(function(){var e=p.valueOf(),t=h.valueOf(),n={id:o,endMillis:t,startMillis:e,includeWeather:F},a={method:"POST",headers:$,body:JSON.stringify(n)};k(!0),ge("/historical/",a).then(fe).then(function(e){k(!1),P(e.config),A(e.timeseries)}).catch(function(e){k(!1),console.error("There was an error retrieving your project: ".concat(e))})},[p,h,F,o]);Object(a.useEffect)(function(){Y()},[]);var G=Object(a.useCallback)(function(e){e.preventDefault();var t=JSON.parse(e.data).minDateMillis;_(Ge()(t))},[]),q="/historical/".concat(o,"/min_date");return rt(q,G),r.a.createElement(He,{title:L?"".concat(L.projectName," - Historical"):"Project Historical Analysis",baseUrl:c,id:o},S&&r.a.createElement(Pe,{message:""}),T&&L&&Z&&r.a.createElement("div",null,r.a.createElement(lt,{headerContent:"Historical Data"},r.a.createElement(Qt,{message:"Data from",startMillis:T[0].timestamp,endMillis:T[T.length-1].timestamp,timeZone:L.timeZone}),r.a.createElement(zt,{barKey:"lmp",data:T,timeZone:L.timeZone,aspect:4,useBrush:!0})),r.a.createElement(lt,null,r.a.createElement("div",{style:en.minDate},r.a.createElement(pt,{message:"Earliest data currently available is from",millis:Z.valueOf(),timeZone:L.timeZone})),r.a.createElement("div",{style:en.dateControls},r.a.createElement($t,{onSelect:function(e){return w(e.target.value)},selected:j}),r.a.createElement(Zt,{date:p,title:"Start Time",increment:j,onIncrement:function(){var e=H(p);e.isBefore(h)?f(e):f(h.clone().subtract(1,"day"))},onDecrement:function(){var e=U(p);e.isAfter(Z)?f(e):f(Z.clone())},timeZone:L.timeZone}),r.a.createElement(Zt,{date:h,title:"End Time",increment:j,onIncrement:function(){var e=H(h);e.isBefore(l())?y(e):y(l())},onDecrement:function(){var e=U(h);e.isAfter(p)?y(e):y(p.clone().add(1,"day"))},timeZone:L.timeZone}),r.a.createElement("div",{style:en.inclusion},r.a.createElement(Vt,{name:"include-weather",label:"Include Weather",value:!F,checked:F,onChange:function(e){return W("true"===e.target.value)}}),r.a.createElement(Ae,{value:"Get Data",disabled:S,type:"success",onClick:Y}))))))},nn=n(28),an=n(163),rn={background:b},on=function(e){var t=e.data,n=Object(a.useRef)(null),o=Math.PI/4,c=[375,100],l=nn.e();return Object(a.useEffect)(function(){var e=t.points,a=t.axisLength,r=Object(an._3d)().scale(1).x(function(e){return e.x}).y(function(e){return e.y}).z(function(e){return e.z}).origin(c).rotateY(o).rotateX(-o).shape("SURFACE",a),i=nn.g(n.current).append("g"),s=function(e){var t=(e[0].y+e[1].y+e[2].y+e[3].y)/4;return e.ccw?nn.b(l(t)):nn.a(nn.b(l(t))).darker(2.5)};!function(){var t=nn.d(e,function(e){return e.y}),n=nn.c(e,function(e){return e.y}),a=nn.f(e,function(e,t){return t.y-e.y});console.log("max revenue:",n,"\npoint?",e[a]),l.domain([t,n]),function(e,t){var n=i.selectAll("path").data(e,function(e){return e.plane});n.enter().append("path").attr("class","_3d").attr("fill",s).attr("opacity",0).attr("stroke-opacity",.1).merge(n).attr("stroke","black").transition().duration(t).attr("opacity",1).attr("fill",s).attr("d",r.draw),n.exit().remove(),nn.h("._3d").sort(r.sort)}(r(e),1e3)}()},[l,t,c,o]),r.a.createElement("svg",{style:rn,width:750,height:1e3,ref:n})},cn={specs:{padding:"0 2em"},columns:{display:"flex",flexDirection:"rows",justifyContent:"space-between",maxWidth:"60em"},controls:{display:"flex",justifyContent:"space-between"},inclusion:{display:"flex",flexDirection:"column"},getData:{margin:".5em 0 0 1.5em"},minDate:{padding:"0 0 1em"},revenue:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},thresholds:{display:"flex",flexDirection:"column",lineHeight:"2.5em",padding:"1em 0",fontStyle:"italic"},showChart:{display:"flex",justifyContent:"flex-end"}},ln=function(e){var t=e.match,n=t.url,o=t.params.projectId,c=Ke(n,"insights",o),l=Ge()().subtract(7,"days"),i=l.clone().subtract(7,"days"),s=Object(a.useState)(i),u=Object(ae.a)(s,1)[0],d=Object(a.useState)(l),m=Object(ae.a)(d,1)[0],p=Object(a.useState)(0),f=Object(ae.a)(p,2),b=f[0],g=f[1],h=Object(a.useState)(0),y=Object(ae.a)(h,2),v=y[0],E=y[1],j=Object(a.useState)(0),w=Object(ae.a)(j,2),x=w[0],O=w[1],S=Object(a.useState)(0),k=Object(ae.a)(S,2),C=k[0],D=k[1],T=Object(a.useState)(.1),A=Object(ae.a)(T,1)[0],I=Object(a.useState)(!1),M=Object(ae.a)(I,2),L=M[0],P=M[1],z=Object(a.useState)(null),R=Object(ae.a)(z,2),F=R[0],W=R[1],B=Object(a.useState)(null),N=Object(ae.a)(B,2),Z=N[0],_=N[1],H=Object(a.useState)(null),U=Object(ae.a)(H,2),Y=U[0],G=U[1],J=Object(a.useState)(0),q=Object(ae.a)(J,2),K=q[0],V=q[1],X=Object(a.useState)(!1),Q=Object(ae.a)(X,2),ee=Q[0],te=Q[1],ne=function(e,t){return e+t},re=function(e,t){return e-t},oe=Object(a.useCallback)(Object(de.a)(ue.a.mark(function e(){var t,n,a,r,c,l,i,s,d,p,f;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.valueOf(),n=m.valueOf(),a={id:o,endMillis:n,startMillis:t},r={method:"POST",headers:$,body:JSON.stringify(a)},P(!0),e.prev=5,e.next=8,ge("/insights/",r);case 8:return c=e.sent,e.next=11,fe(c);case 11:l=e.sent,W(l.data),_(l.aggregate),G(l.config),i=l.aggregate,s=i.belowMean,d=i.belowStdDev,p=i.aboveMean,f=i.aboveStdDev,g(s),E(d),O(p),D(f),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),console.error("There was an error retrieving your project: ".concat(e.t0));case 25:return e.prev=25,P(!1),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[5,22,25,28]])})),[u,m,o]),ce=Object(a.useCallback)(Object(de.a)(ue.a.mark(function e(){var t,n,a,r;return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:o,chargeThreshold:b,dischargeThreshold:x},n={method:"POST",headers:$,body:JSON.stringify(t)},P(!0),e.prev=3,e.next=6,ge("/get_revenue_by_thresholds/",n);case 6:return a=e.sent,e.next=9,fe(a);case 9:r=e.sent,V(r.revenue),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("There was an error retrieving revenue data: ".concat(e.t0));case 16:return e.prev=16,P(!1),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[3,13,16,19]])})),[b,x,o]);return Object(a.useEffect)(function(){oe()},[]),console.log("aggregate:",Z),r.a.createElement(He,{title:Y?"".concat(Y.projectName," - Insights"):"Project Data Insights",baseUrl:c,id:o},L&&r.a.createElement(Pe,{message:""}),r.a.createElement("div",{style:cn.columns},r.a.createElement(lt,{headerContent:"Values for Potential Charging"},r.a.createElement("div",{style:cn.specs},r.a.createElement(Se,{content:"Number of Events"}),r.a.createElement(tt,{content:"".concat(Z?Z.belowN:0)}),r.a.createElement(Se,{content:"Average Price"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.belowMean):"$-.--")}),r.a.createElement(Se,{content:"Lowest Price"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.belowMin):"$-.--")}),r.a.createElement(Se,{content:"Highest Price"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.belowMax):"$-.--")}),r.a.createElement(Se,{content:"Standard Deviation"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.belowStdDev):"$-.--")}))),r.a.createElement(lt,{headerContent:"Values for Potential Discharging"},r.a.createElement("div",{style:cn.specs},r.a.createElement(Se,{content:"Number of Events"}),r.a.createElement(tt,{content:"".concat(Z?Z.aboveN:0)}),r.a.createElement(Se,{content:"Average Price"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.aboveMean):"$-.--")}),r.a.createElement(Se,{content:"Lowest Price"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.aboveMin):"$-.--")}),r.a.createElement(Se,{content:"Highest Price"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.aboveMax):"$-.--")}),r.a.createElement(Se,{content:"Standard Deviation"}),r.a.createElement(tt,{content:"".concat(Z?Ve(Z.aboveStdDev):"$-.--")})))),r.a.createElement(lt,{headerContent:"Test Charge and Discharge Thresholds"},r.a.createElement("div",{style:cn.controls},r.a.createElement(Nt,{value:b||Y&&Y.chargeThreshold,format:Ve,title:"Charge Threshold",disabled:Y&&!Y.chargeThreshold,onIncrement:function(){var e=ne(b,v*A);g(e)},onDecrement:function(){var e=re(b,v*A);g(e)},onIncrementLabel:"".concat(A,"\u03c3"),onDecrementLabel:"".concat(A,"\u03c3")}),r.a.createElement(Nt,{value:x||Y&&Y.dischargeThreshold,format:Ve,title:"Discharge Threshold",disabled:Y&&!Y.dischargeThreshold,onIncrement:function(){var e=ne(x,C*A);O(e)},onDecrement:function(){var e=re(x,C*A);O(e)},onIncrementLabel:"".concat(A,"\u03c3"),onDecrementLabel:"".concat(A,"\u03c3")})),r.a.createElement("div",{style:cn.revenue},r.a.createElement("div",null,r.a.createElement(Se,{content:"7 Day Revenue for Selected Thresholds"}),r.a.createElement(tt,{content:"".concat(K?Ve(K):"$-.--")})),r.a.createElement(Ae,{value:"Get Revenue",disabled:L,type:"success",onClick:ce})),0!==K&&Z&&r.a.createElement("div",{style:cn.thresholds},r.a.createElement("span",null,"Charge Threshold is ".concat($e((Z.belowMean-b)/Z.belowStdDev,2)," x \u03c3 below the mean")),r.a.createElement("span",null,"Discharge Threshold is ".concat($e((x-Z.aboveMean)/Z.aboveStdDev,2)," x \u03c3 above the mean"))),r.a.createElement("div",{style:cn.showChart},r.a.createElement(Ae,{value:"Show Chart",disabled:L,type:"success",onClick:function(){return te(!ee)}}))),ee&&r.a.createElement(on,{data:F}))},sn=function(e){var t=e.match;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{exact:!0,path:"".concat(t.path,"/create_project"),component:Qe}),r.a.createElement(i.a,{path:"".concat(t.path,"/project/:projectId"),component:at}),r.a.createElement(i.a,{path:"".concat(t.path,"/roi/:projectId"),component:ot}),r.a.createElement(i.a,{path:"".concat(t.path,"/dashboard/:projectId"),component:Ft}),r.a.createElement(i.a,{path:"".concat(t.path,"/historical/:projectId"),component:tn}),r.a.createElement(i.a,{path:"".concat(t.path,"/insights/:projectId"),component:ln}))},un={root:{textAlign:"left",padding:"1em 3em"},list:{lineHeight:"3em",padding:"1em 0 1em 1.5em",listStyle:"disc"},link:{textAlign:"right",padding:"0 2em"},button:{padding:".8em"}},dn=function(e){var t=e.match;return r.a.createElement(ne,{title:"Demo"},t.isExact&&r.a.createElement("div",{style:un.root},r.a.createElement(z,{content:"Evaluate Project Locations"}),r.a.createElement("ul",{style:un.list},r.a.createElement("li",null,r.a.createElement("p",null,"Coming Soon!"))),r.a.createElement(z,{content:"Build a Project"}),r.a.createElement("ul",{style:un.list},r.a.createElement("li",null,r.a.createElement("p",null,"Specify the project location either by clicking on the map or entering an address.")),r.a.createElement("li",null,r.a.createElement("p",null,"Specify the power, energy capacity, and round trip efficiency of your battery or other storage technology.")),r.a.createElement("li",null,r.a.createElement("p",null,"Create the project to get access to try out the Project Dashboard and Historical data visualizer."))),r.a.createElement("div",{style:un.link},r.a.createElement(_,{to:"/demo/create_project"},r.a.createElement(Ae,{value:"CREATE PROJECT",type:"primary",overrideStyles:un.button})))),r.a.createElement(sn,{match:t}))},mn={text:{textAlign:"left",padding:"1em 3em"},link:{textDecoration:"none",color:E,fontWeight:"bold"}},pn=function(){return r.a.createElement(ne,{title:"Contact"},r.a.createElement("div",{style:mn.root},r.a.createElement("p",{style:mn.text},"As I've detailed ",r.a.createElement("a",{href:"/about",target:"_blank",rel:"noopener noreferrer",style:mn.link},"here"),", this idea of this project has be rattling around my brain for the last three years, even prior to changing careers to software development.  In fact, building something like this was among the reasons I undertook that change."),r.a.createElement("p",{style:mn.text},"I would like help making it better"),r.a.createElement("p",{style:mn.text},"If you have feedback, advice, or interest in this project, please contact me either on ",r.a.createElement("a",{href:"https://twitter.com/matsad111",target:"_blank",rel:"noopener noreferrer",style:mn.link},"Twitter")," or on ",r.a.createElement("a",{href:"https://www.linkedin.com/in/matthew-sadauckas-68bb9793/",target:"_blank",rel:"noopener noreferrer",style:mn.link},"LinkedIn"),"."),r.a.createElement("p",{style:mn.text},"If you would like to know more about the code behind this project, take a look ",r.a.createElement("a",{href:"https://github.com/matsad3547/entelx",target:"_blank",rel:"noopener noreferrer",style:mn.link},"here"),".")))},fn={padding:"1em 0"},bn=function(){return r.a.createElement(ne,{title:"About"},r.a.createElement("p",{style:fn},"This project is the work of Matt Sadauckas.  Motivated, knowledgeable collaborators and critical feedback sought!"))},gn={root:{textAlign:"right"},nav:{display:"inline-flex",width:"13em",justifyContent:"space-between",padding:"1em 3em"}},hn=function(){return r.a.createElement("div",{style:gn.root},r.a.createElement("nav",{style:gn.nav},r.a.createElement(_,{to:"/"},"Home"),r.a.createElement(_,{to:"/demo"},"Demo"),r.a.createElement(_,{to:"/login",disabled:!0},"Log In")))},yn=function(){var e=Object(a.useState)(!1),t=Object(ae.a)(e,2),n=t[0],o=t[1];return r.a.createElement(He,{title:"System Administration"},n&&r.a.createElement(Pe,{message:""}),r.a.createElement("p",null,"One Time Request"),r.a.createElement(Ae,{value:"EXECUTE",type:"danger",onClick:function(){o(!0);var e=JSON.stringify({keys:[]});ge("",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:e}).then(function(e){console.log("res at onRequest",e),o(!1)}).catch(function(e){o(!1),console.error("There was an error writing to ".concat("",": ").concat(e))})}}))},vn=(n(379),{root:{fontFamily:"Montserrat, Helvetica, sans-serif",fontWeight:200,fontSize:16,textAlign:"center",overflow:"hidden",display:"flex",flexDirection:"column",minHeight:"100vh"}}),En=function(){return r.a.createElement("div",{style:vn.root},r.a.createElement(hn,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{exact:!0,path:"/",component:K}),r.a.createElement(i.a,{path:"/demo",component:dn}),r.a.createElement(i.a,{path:"/about",component:bn}),r.a.createElement(i.a,{path:"/contact",component:pn}),r.a.createElement(i.a,{path:"/system_admin",component:yn})))},jn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function wn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(l.a,null,r.a.createElement(En,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");jn?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):wn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):wn(e)})}}()}},[[186,1,2]]]);
//# sourceMappingURL=main.d31f1472.chunk.js.map